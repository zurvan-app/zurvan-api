# üß† Zurvan API

The **Zurvan API** is the core backend service powering the [Zurvan](https://github.com/zurvan-app) ecosystem ‚Äî a cross-platform, AI-powered productivity suite designed to help users plan, track, and improve their daily life.

Built with **Golang**, it provides a modular architecture supporting:
- **User authentication** with JWT tokens and email verification
- Task and habit management
- AI-driven planning and insights
- Real-time synchronization across all platforms

## ‚öôÔ∏è Tech Stack

| Layer | Technology |
|-------|-------------|
| Language | Go (v1.25+) |
| Framework | GraphQL (gqlgen) |
| Database | PostgreSQL |
| Authentication | JWT + Email Verification |
| Architecture | Clean Architecture |
| Password Hashing | bcrypt |

## üöÄ Quick Start

### Prerequisites

- Go 1.25 or higher (for local development)
- PostgreSQL database (for local development)
- Docker and Docker Compose (recommended)
- Git

### Option 1: Docker Setup (Recommended)

#### Development Environment

```bash
# Clone the repository
git clone https://github.com/zurvan-app/zurvan-api.git
cd zurvan-api

# Start development environment
./scripts/dev-start.sh

# Or manually:
cp .env.development .env
docker-compose up --build
```

**Development Services:**
- API: `http://localhost:8080`
- GraphQL Playground: `http://localhost:8080/`
- PostgreSQL: `localhost:5432`
- Redis: `localhost:6379`
### Docker Commands
  }) {
    user {
      id
      email
    }
    accessToken
}
```

# Zurvan API

Zurvan API is the backend service for the Zurvan product. It is written in Go and uses GraphQL (gqlgen) with PostgreSQL as its primary datastore.

This README focuses on a concise developer guide: how to get the project running locally, how to run tests, and where to look for important pieces of the codebase.

Requirements
- Go 1.20+ (Go modules enabled)
- PostgreSQL (local or Docker)
- Docker & Docker Compose (recommended for full stack)

Quick start (Docker)
1. Copy env file and edit DB settings:

```bash
cp .sample.env .env
# edit .env to point to your DB settings
```

2. Start services:

```bash
docker-compose up --build
```

3. API will be available at `http://localhost:8080`; GraphQL playground at `/`.

Local development (without Docker)
1. Ensure PostgreSQL is running and `DB_*` env vars in `.env` are set.
2. Download modules:

```bash
go mod download
```

3. Run the server:

```bash
go run server.go
```

Running tests
- Unit and package tests:

```bash
go test ./...
```

- Repository contains some integration-style tests under `test/` that require a running DB.

Codegen / Migrations
- GraphQL types & resolvers are generated by `gqlgen`. Regenerate after schema changes:

```bash
go run github.com/99designs/gqlgen
```

- DB migrations are under `database/migration`. Use your preferred tool (the project includes a small migrator at `database/migrator.go`).

Important folders
- `feature/auth/` ‚Äî authentication feature (domain, usecases, repositories)
- `graph/` ‚Äî GraphQL layer and generated code
- `database/` ‚Äî DB client and migrator
- `config/` ‚Äî configuration handling

Environment variables (common)
- `PORT` ‚Äî server port (default `8080`)
- `POSTGRES_CONNECTION_URL` ‚Äî full Postgres connection URL used by the DB client
- `JWT_SECRET` ‚Äî secret used to sign JWTs
- `JWT_ACCESS_TOKEN_TTL` / `JWT_REFRESH_TOKEN_TTL` ‚Äî token lifetimes

Developer notes
- Use `gofmt` and `go vet` during development. Consider adding `golangci-lint` in CI.
- `graph/generated.go` and `graph/model/models_gen.go` are generated files ‚Äî avoid manual edits.
- There are TODOs in `feature/auth/application/usecases/auth_usecase.go` for integrating a real email sender; consider adding an `EmailSender` interface for production and test implementations.

Contributing
- Fork ‚Üí branch ‚Üí PR. Keep changes small and provide tests where useful.

License
- MIT

Contact
- See repository owner / project maintainers for questions about the architecture or deployment.
